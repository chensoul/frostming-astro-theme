---
import '../styles/global.css';
import { themeConfig } from '../theme/config';
export interface Props {
  title?: string;
  canonical?: string;
}
const { title = themeConfig.siteName, canonical } = Astro.props;
const siteUrl = themeConfig.siteUrl.replace(/\/$/, '');
const defaultOgImage = `${siteUrl}/avatar.svg`;
---
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={themeConfig.description} />
    <link rel="icon" type="image/svg+xml" href="/avatar.svg" />
    <link rel="preconnect" href="https://fonts.font.im">
    <link href="https://fonts.font.im/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.27/dist/katex.min.css">
    {canonical && <link rel="canonical" href={canonical} />}
    <link rel="alternate" type="application/rss+xml" title={themeConfig.siteName} href="/index.xml" />
    <meta property="og:type" content="website" />
    {canonical && <meta property="og:url" content={canonical} />}
    <meta property="og:title" content={title} />
    <meta property="og:description" content={themeConfig.description} />
    <meta property="og:site_name" content={themeConfig.siteName} />
    <meta property="og:image" content={defaultOgImage} />
    <meta name="twitter:site" content={themeConfig.socialHandles?.twitter ? `@${themeConfig.socialHandles.twitter}` : undefined} />
    <meta name="twitter:card" content="summary_large_image" />
    <title>{title}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.0/css/all.min.css" />
    <script>
      const theme = localStorage.getItem("theme");
      if (theme === "dark" || (!theme && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
        document.documentElement.classList.add("dark");
      }
    </script>
  </head>
  <body class="min-h-screen bg-white text-black transition-colors dark:bg-black dark:text-white">
    <div class="mx-auto max-w-3xl px-4 lg:max-w-225">
      <slot />
      <footer class="py-8 text-center text-sm text-gray-500 dark:text-gray-400">
        <p>Â© {new Date().getFullYear()} {themeConfig.author.name}. All rights reserved. Powered by Astro</p>
      </footer>
    </div>
  </body>
</html>
